{"version":3,"file":"index.vue.mjs","sources":["../../../../../../packages/preview/supports/vue-files-preview/index.vue"],"sourcesContent":["<script lang=\"ts\" setup>\r\nimport { watch } from 'vue'\r\nimport { PreviewRules, getPreviewTypeByFileType } from '../../preview.const'\r\nimport type { IPreviewRule, PreviewProps } from '../../preview.interface'\r\nimport { PreviewType } from '../../preview.interface'\r\nimport { getFileName, getFileType } from '../../utils/utils'\r\n\r\nconst props = withDefaults(\r\n  defineProps<PreviewProps & {\r\n    width?: string\r\n    height?: string\r\n    overflow?: string\r\n  }>(),\r\n  {\r\n    file: () => null,\r\n    url: () => null,\r\n    width: () => '100%',\r\n    height: () => '100%',\r\n    overflow: () => 'auto',\r\n  },\r\n)\r\n\r\nconst currentPreview = shallowRef<IPreviewRule>(PreviewRules[PreviewType.NONE])\r\n\r\nfunction syncPreview(file: File): void {\r\n  const preview = PreviewRules[getPreviewTypeByFileType(getFileType(file))]\r\n  if (preview) {\r\n    preview.name = getFileName(file)\r\n    currentPreview.value = preview\r\n  }\r\n}\r\n\r\nwatch(\r\n  () => props.file,\r\n  (file) => {\r\n    if (file) {\r\n      syncPreview(file)\r\n    }\r\n  },\r\n  { immediate: true },\r\n)\r\n</script>\r\n\r\n<template>\r\n  <div class=\"vue-files-preview\" :style=\"{ width, height, overflow }\">\r\n    <component :is=\"currentPreview.component\" :name=\"currentPreview.name\" :file=\"file\" :url=\"url\" />\r\n  </div>\r\n</template>\r\n\r\n<style scoped lang=\"scss\"></style>\r\n"],"names":["props","__props","currentPreview","shallowRef","PreviewRules","PreviewType","syncPreview","file","preview","getPreviewTypeByFileType","getFileType","getFileName","watch"],"mappings":";;;;;;;;;;;;;;;AAOA,UAAMA,IAAQC,GAeRC,IAAiBC,EAAyBC,EAAaC,EAAY,IAAI,CAAC;AAE9E,aAASC,EAAYC,GAAkB;AACrC,YAAMC,IAAUJ,EAAaK,EAAyBC,EAAYH,CAAI,CAAC,CAAC;AACxE,MAAIC,MACFA,EAAQ,OAAOG,EAAYJ,CAAI,GAC/BL,EAAe,QAAQM;AAAA,IAE3B;AAEA,WAAAI;AAAA,MACE,MAAMZ,EAAM;AAAA,MACZ,CAACO,MAAS;AACR,QAAIA,KACFD,EAAYC,CAAI;AAAA,MAEpB;AAAA,MACA,EAAE,WAAW,GAAA;AAAA,IAAK;;;;;;;;;;;;"}