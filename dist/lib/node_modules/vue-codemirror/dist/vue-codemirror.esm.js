"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const r=require("vue"),T=require("../../codemirror/dist/index.js"),b=require("../../@codemirror/state/dist/index.js"),p=require("../../@codemirror/view/dist/index.js"),V=require("../../@codemirror/commands/dist/index.js"),F=require("../../@codemirror/language/dist/index.js");/*!
* VueCodemirror v6.1.1
* Copyright (c) Surmon. All rights reserved.
* Released under the MIT License.
* Surmon
*/var O=Object.freeze({autofocus:!1,disabled:!1,indentWithTab:!0,tabSize:2,placeholder:"",autoDestroy:!0,extensions:[T.basicSetup]}),B=Symbol("vue-codemirror-global-config"),a,P=function(t){var u=t.onUpdate,s=t.onChange,h=t.onFocus,f=t.onBlur,l=function(n,d){var o={};for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&d.indexOf(e)<0&&(o[e]=n[e]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function"){var c=0;for(e=Object.getOwnPropertySymbols(n);c<e.length;c++)d.indexOf(e[c])<0&&Object.prototype.propertyIsEnumerable.call(n,e[c])&&(o[e[c]]=n[e[c]])}return o}(t,["onUpdate","onChange","onFocus","onBlur"]);return b.EditorState.create({doc:l.doc,selection:l.selection,extensions:(Array.isArray(l.extensions)?l.extensions:[l.extensions]).concat([p.EditorView.updateListener.of(function(n){u(n),n.docChanged&&s(n.state.doc.toString(),n),n.focusChanged&&(n.view.hasFocus?h(n):f(n))})])})},v=function(t){var u=new b.Compartment;return{compartment:u,run:function(s){u.get(t.state)?t.dispatch({effects:u.reconfigure(s)}):t.dispatch({effects:b.StateEffect.appendConfig.of(u.of(s))})}}},y=function(t,u){var s=v(t),h=s.compartment,f=s.run;return function(l){var n=h.get(t.state);f(l??n!==u?u:[])}},g={type:Boolean,default:void 0},z={autofocus:g,disabled:g,indentWithTab:g,tabSize:Number,placeholder:String,style:Object,autoDestroy:g,phrases:Object,root:Object,extensions:Array,selection:Object},R={modelValue:{type:String,default:""}},q=Object.assign(Object.assign({},z),R);(function(t){t.Change="change",t.Update="update",t.Focus="focus",t.Blur="blur",t.Ready="ready",t.ModelUpdate="update:modelValue"})(a||(a={}));var m={};m[a.Change]=function(t,u){return!0},m[a.Update]=function(t){return!0},m[a.Focus]=function(t){return!0},m[a.Blur]=function(t){return!0},m[a.Ready]=function(t){return!0};var w={};w[a.ModelUpdate]=m[a.Change];var W=Object.assign(Object.assign({},m),w),M=r.defineComponent({name:"VueCodemirror",props:Object.assign({},q),emits:Object.assign({},W),setup:function(t,u){var s=r.shallowRef(),h=r.shallowRef(),f=r.shallowRef(),l=Object.assign(Object.assign({},O),r.inject(B,{})),n=r.computed(function(){var d={};return Object.keys(r.toRaw(t)).forEach(function(o){var e;o!=="modelValue"&&(d[o]=(e=t[o])!==null&&e!==void 0?e:l[o])}),d});return r.onMounted(function(){var d;h.value=P({doc:t.modelValue,selection:n.value.selection,extensions:(d=l.extensions)!==null&&d!==void 0?d:[],onFocus:function(e){return u.emit(a.Focus,e)},onBlur:function(e){return u.emit(a.Blur,e)},onUpdate:function(e){return u.emit(a.Update,e)},onChange:function(e,c){e!==t.modelValue&&(u.emit(a.Change,e,c),u.emit(a.ModelUpdate,e,c))}}),f.value=function(e){return new p.EditorView(Object.assign({},e))}({state:h.value,parent:s.value,root:n.value.root});var o=function(e){var c=function(){return e.state.doc.toString()},S=v(e).run,j=y(e,[p.EditorView.editable.of(!1),b.EditorState.readOnly.of(!0)]),x=y(e,p.keymap.of([V.indentWithTab])),C=v(e).run,E=v(e).run,U=v(e).run,D=v(e).run;return{focus:function(){return e.focus()},getDoc:c,setDoc:function(i){i!==c()&&e.dispatch({changes:{from:0,to:e.state.doc.length,insert:i}})},reExtensions:S,toggleDisabled:j,toggleIndentWithTab:x,setTabSize:function(i){C([b.EditorState.tabSize.of(i),F.indentUnit.of(" ".repeat(i))])},setPhrases:function(i){E([b.EditorState.phrases.of(i)])},setPlaceholder:function(i){U(p.placeholder(i))},setStyle:function(i){i===void 0&&(i={}),D(p.EditorView.theme({"&":Object.assign({},i)}))}}}(f.value);r.watch(function(){return t.modelValue},function(e){e!==o.getDoc()&&o.setDoc(e)}),r.watch(function(){return t.extensions},function(e){return o.reExtensions(e||[])},{immediate:!0}),r.watch(function(){return n.value.disabled},function(e){return o.toggleDisabled(e)},{immediate:!0}),r.watch(function(){return n.value.indentWithTab},function(e){return o.toggleIndentWithTab(e)},{immediate:!0}),r.watch(function(){return n.value.tabSize},function(e){return o.setTabSize(e)},{immediate:!0}),r.watch(function(){return n.value.phrases},function(e){return o.setPhrases(e||{})},{immediate:!0}),r.watch(function(){return n.value.placeholder},function(e){return o.setPlaceholder(e)},{immediate:!0}),r.watch(function(){return n.value.style},function(e){return o.setStyle(e)},{immediate:!0}),n.value.autofocus&&o.focus(),u.emit(a.Ready,{state:h.value,view:f.value,container:s.value})}),r.onBeforeUnmount(function(){n.value.autoDestroy&&f.value&&function(d){d.destroy()}(f.value)}),function(){return r.h("div",{class:"v-codemirror",style:{display:"contents"},ref:s})}}}),A=M;exports.Codemirror=A;exports.DEFAULT_CONFIG=O;
//# sourceMappingURL=vue-codemirror.esm.js.map
